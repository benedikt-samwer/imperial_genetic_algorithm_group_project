<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Palusznium‑Rush Ilmenite Optimiser: Data Structures and Circuit Representation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Palusznium‑Rush Ilmenite Optimiser
   </div>
   <div id="projectbrief">A C++17+OpenMP toolkit for mineral‑processing circuit design</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Data Structures and Circuit Representation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> This document details the data structures and circuit representation methods used in the project, serving as a common reference for team members.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
1. Circuit Vector Representation</h1>
<p>Circuits are represented using integer vectors in the following format:</p>
<div class="fragment"><div class="line">[feed_unit, unit0_conc, unit0_waste, unit1_conc, unit1_waste, ...]</div>
</div><!-- fragment --><p>Where:</p><ul>
<li><code>feed_unit</code>: Index of the unit receiving the circuit feed (0 to num_units-1)</li>
<li><code>unitX_conc</code>: Destination of the concentrate stream from unit X</li>
<li><code>unitX_waste</code>: Destination of the waste stream from unit X</li>
</ul>
<p>Destinations can be:</p><ul>
<li><code>0</code> to <code>num_units-1</code>: Index of the unit receiving the stream</li>
<li><code>-1</code> (PALUSZNIUM_PRODUCT): Final Palusznium concentrate product</li>
<li><code>-2</code> (GORMANIUM_PRODUCT): Final Gormanium concentrate product</li>
<li><code>-3</code> (TAILINGS_OUTPUT): Final tailings output</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Example</h2>
<p>For a circuit with 3 units, a vector might be: </p><div class="fragment"><div class="line">[0, 1, -3, -1, 2, 0, -2]</div>
</div><!-- fragment --><p>This represents:</p><ul>
<li>Feed enters unit 0</li>
<li>Concentrate stream from unit 0 goes to unit 1</li>
<li>Waste stream from unit 0 goes to tailings output</li>
<li>Concentrate stream from unit 1 goes to Palusznium product</li>
<li>Waste stream from unit 1 goes to unit 2</li>
<li>Concentrate stream from unit 2 goes to unit 0</li>
<li>Waste stream from unit 2 goes to Gormanium product</li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
Visual Representation</h3>
<div class="fragment"><div class="line">graph TD;</div>
<div class="line">    %% Define nodes</div>
<div class="line">    Feed([Circuit Feed])</div>
<div class="line">    Unit0[Unit 0]</div>
<div class="line">    Unit1[Unit 1]</div>
<div class="line">    Unit2[Unit 2]</div>
<div class="line">    Palusznium[Palusznium Product]</div>
<div class="line">    Gormanium[Gormanium Product]</div>
<div class="line">    Tailings[Tailings Output]</div>
<div class="line">    </div>
<div class="line">    %% Define connections</div>
<div class="line">    Feed --&gt;|Feed| Unit0</div>
<div class="line">    </div>
<div class="line">    Unit0 --&gt;|Concentrate| Unit1</div>
<div class="line">    Unit0 --&gt;|Waste| Tailings</div>
<div class="line">    </div>
<div class="line">    Unit1 --&gt;|Concentrate| Palusznium</div>
<div class="line">    Unit1 --&gt;|Waste| Unit2</div>
<div class="line">    </div>
<div class="line">    Unit2 --&gt;|Concentrate| Unit0</div>
<div class="line">    Unit2 --&gt;|Waste| Gormanium</div>
<div class="line">    </div>
<div class="line">    %% Styling</div>
<div class="line">    classDef unit fill:#f9f,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef product fill:#bbf,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef feed fill:#bfb,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef tailings fill:#fbb,stroke:#333,stroke-width:2px;</div>
<div class="line">    </div>
<div class="line">    class Unit0,Unit1,Unit2 unit;</div>
<div class="line">    class Palusznium,Gormanium product;</div>
<div class="line">    class Feed feed;</div>
<div class="line">    class Tailings tailings;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
2. Key Data Structures</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
2.1 Separation Unit (CUnit)</h2>
<p>The <code><a class="el" href="../../da/daa/classCUnit.html">CUnit</a></code> class represents a single separation unit, containing the following key properties:</p>
<ul>
<li>Connection properties:<ul>
<li><code>conc_num</code>: Unit connected to concentrate stream</li>
<li><code>tails_num</code>: Unit connected to waste stream</li>
<li><code>mark</code>: Boolean flag used during graph traversal</li>
</ul>
</li>
<li>Physical properties:<ul>
<li><code>volume</code>: Unit volume (m³)</li>
<li>Feed flow rates: <code>feed_palusznium</code>, <code>feed_gormanium</code>, <code>feed_waste</code></li>
<li>Separation constants: <code>k_palusznium</code>, <code>k_gormanium</code>, <code>k_waste</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
2.2 Circuit (Circuit)</h2>
<p>The <code><a class="el" href="../../dd/d1f/classCircuit.html">Circuit</a></code> class represents the entire separation circuit, with key functions:</p>
<ul>
<li>Initialize circuit configuration from circuit vector</li>
<li>Check circuit validity</li>
<li>Run mass balance calculations</li>
<li>Calculate economic value of the circuit</li>
<li>Calculate recovery and grade metrics</li>
<li>Generate visualization output</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
2.3 Simulator Parameters (Simulator_Parameters)</h2>
<p>The <code><a class="el" href="../../de/d0e/structSimulator__Parameters.html">Simulator_Parameters</a></code> structure contains all parameters needed for simulation:</p>
<ul>
<li>Convergence parameters: <code>tolerance</code>, <code>max_iterations</code></li>
<li>Material properties: <code>material_density</code>, <code>solids_content</code></li>
<li>Separation constants: <code>k_palusznium</code>, <code>k_gormanium</code>, <code>k_waste</code></li>
<li>Feed flow rates</li>
<li>Economic parameters</li>
<li>Unit volume parameters</li>
<li>Visualization options</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
2.4 Genetic Algorithm Parameters (Algorithm_Parameters)</h2>
<p>The <code><a class="el" href="../../d1/d4a/structAlgorithm__Parameters.html">Algorithm_Parameters</a></code> structure contains all genetic algorithm parameters:</p>
<ul>
<li>General parameters: <code>max_iterations</code>, <code>population_size</code>, <code>elite_count</code></li>
<li>Selection parameters: <code>selection_pressure</code></li>
<li>Crossover parameters: <code>crossover_probability</code>, <code>crossover_points</code></li>
<li>Mutation parameters: <code>mutation_probability</code>, <code>mutation_step_size</code></li>
<li>Termination criteria: <code>convergence_threshold</code>, <code>stall_generations</code></li>
<li>Debug options: <code>verbose</code>, <code>log_results</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
2.5 Circuit Vector (CircuitVector)</h2>
<p>The <code><a class="el" href="../../d3/d07/classCircuitVector.html">CircuitVector</a></code> class provides a convenient interface for working with circuit vectors:</p>
<ul>
<li>Constructors for empty or specified-size vectors</li>
<li>Get/set unit connections</li>
<li>Random generation of valid circuits</li>
<li>Import/export circuit configurations</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
3. Interfaces and Function Signatures</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
3.1 Circuit Validity Check</h2>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="../../dd/d1f/classCircuit.html#affd439dae9c8ec8e811b8a2e4321498a">Circuit::check_validity</a>(<span class="keywordtype">int</span> vector_size, <span class="keyword">const</span> <span class="keywordtype">int</span>* circuit_vector);</div>
<div class="ttc" id="aclassCircuit_html_affd439dae9c8ec8e811b8a2e4321498a"><div class="ttname"><a href="../../dd/d1f/classCircuit.html#affd439dae9c8ec8e811b8a2e4321498a">Circuit::check_validity</a></div><div class="ttdeci">bool check_validity(int vector_size, const int *circuit_vector)</div><div class="ttdoc">Check the validity of the circuit.</div><div class="ttdef"><b>Definition</b> CCircuit.cpp:54</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
3.2 Circuit Performance Evaluation</h2>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> <a class="code hl_function" href="../../da/d9b/CSimulator_8h.html#a81824f15677e1c64a9aa7dc7d5f6f67e">circuit_performance</a>(<span class="keywordtype">int</span> vector_size, <span class="keywordtype">int</span>* circuit_vector, </div>
<div class="line">                        <span class="keywordtype">int</span> unit_parameters_size, <span class="keywordtype">double</span>* unit_parameters,</div>
<div class="line">                        <a class="code hl_struct" href="../../de/d0e/structSimulator__Parameters.html">Simulator_Parameters</a> simulator_parameters);</div>
<div class="ttc" id="aCSimulator_8h_html_a81824f15677e1c64a9aa7dc7d5f6f67e"><div class="ttname"><a href="../../da/d9b/CSimulator_8h.html#a81824f15677e1c64a9aa7dc7d5f6f67e">circuit_performance</a></div><div class="ttdeci">double circuit_performance(int vector_size, int *circuit_vector, int unit_parameters_size, double *unit_parameters, Simulator_Parameters simulator_parameters)</div></div>
<div class="ttc" id="astructSimulator__Parameters_html"><div class="ttname"><a href="../../de/d0e/structSimulator__Parameters.html">Simulator_Parameters</a></div><div class="ttdef"><b>Definition</b> CSimulator.h:14</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
3.3 Optimization Function</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../d5/d06/Genetic__Algorithm_8h.html#a28fa91744ea10ea8dcf2a66d48734f2c">optimize</a>(<span class="keywordtype">int</span> int_vector_size, <span class="keywordtype">int</span>* int_vector,</div>
<div class="line">            std::function&lt;<span class="keywordtype">double</span>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>*)&gt; func,</div>
<div class="line">            std::function&lt;<span class="keywordtype">bool</span>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>*)&gt; validity,</div>
<div class="line">            <a class="code hl_struct" href="../../d1/d4a/structAlgorithm__Parameters.html">Algorithm_Parameters</a> algorithm_parameters);</div>
<div class="ttc" id="aGenetic__Algorithm_8h_html_a28fa91744ea10ea8dcf2a66d48734f2c"><div class="ttname"><a href="../../d5/d06/Genetic__Algorithm_8h.html#a28fa91744ea10ea8dcf2a66d48734f2c">optimize</a></div><div class="ttdeci">int optimize(int int_vector_size, int *int_vector, std::function&lt; double(int, int *)&gt; func, std::function&lt; bool(int, int *)&gt; validity=all_true_ints, Algorithm_Parameters algorithm_parameters=DEFAULT_ALGORITHM_PARAMETERS)</div><div class="ttdoc">Optimize a discrete vector using a genetic algorithm.</div><div class="ttdef"><b>Definition</b> Genetic_Algorithm.cpp:364</div></div>
<div class="ttc" id="astructAlgorithm__Parameters_html"><div class="ttname"><a href="../../d1/d4a/structAlgorithm__Parameters.html">Algorithm_Parameters</a></div><div class="ttdef"><b>Definition</b> Genetic_Algorithm.h:19</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md14"></a>
4. Global Constants</h1>
<p>All global constants are defined in <code><a class="el" href="../../d2/d6f/constants_8h.html" title="Header file for project-wide constants.">constants.h</a></code>, including:</p>
<ul>
<li>Physical constants: material density, solids content, separation constants</li>
<li>Economic parameters: product values, waste penalties, operating costs</li>
<li>Default feed flow rates</li>
<li><a class="el" href="../../dd/d1f/classCircuit.html">Circuit</a> parameters: unit volumes, circuit volume limits</li>
<li>Simulation parameters</li>
<li>Genetic algorithm parameters</li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
5. Circuit Validity Rules</h1>
<p>Valid circuits must satisfy the following conditions:</p>
<ol type="1">
<li>Every unit must be accessible from the feed</li>
<li>Every unit must have a path to at least one outlet product stream</li>
<li>No self-recycling (a unit's output cannot connect directly back to itself)</li>
<li>Concentrate and waste from a unit should not point to the same destination</li>
</ol>
<p>Circuits that violate these conditions may fail to converge or be physically unreasonable.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Appendix A: Common Circuit Configurations</h1>
<h2><a class="anchor" id="autotoc_md17"></a>
A.1 Simple Series Circuit</h2>
<p>Vector: <code>[0, 1, -3, -1, -2]</code></p>
<div class="fragment"><div class="line">graph TD;</div>
<div class="line">    Feed([Circuit Feed])</div>
<div class="line">    Unit0[Unit 0]</div>
<div class="line">    Unit1[Unit 1]</div>
<div class="line">    Palusznium[Palusznium Product]</div>
<div class="line">    Gormanium[Gormanium Product]</div>
<div class="line">    Tailings[Tailings Output]</div>
<div class="line">    </div>
<div class="line">    Feed --&gt;|Feed| Unit0</div>
<div class="line">    </div>
<div class="line">    Unit0 --&gt;|Concentrate| Unit1</div>
<div class="line">    Unit0 --&gt;|Waste| Tailings</div>
<div class="line">    </div>
<div class="line">    Unit1 --&gt;|Concentrate| Palusznium</div>
<div class="line">    Unit1 --&gt;|Waste| Gormanium</div>
<div class="line">    </div>
<div class="line">    classDef unit fill:#f9f,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef product fill:#bbf,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef feed fill:#bfb,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef tailings fill:#fbb,stroke:#333,stroke-width:2px;</div>
<div class="line">    </div>
<div class="line">    class Unit0,Unit1 unit;</div>
<div class="line">    class Palusznium,Gormanium product;</div>
<div class="line">    class Feed feed;</div>
<div class="line">    class Tailings tailings;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md18"></a>
A.2 Circuit with Recycle</h2>
<p>Vector: <code>[0, 1, -3, 0, -1]</code></p>
<div class="fragment"><div class="line">graph TD;</div>
<div class="line">    Feed([Circuit Feed])</div>
<div class="line">    Unit0[Unit 0]</div>
<div class="line">    Unit1[Unit 1]</div>
<div class="line">    Palusznium[Palusznium Product]</div>
<div class="line">    Tailings[Tailings Output]</div>
<div class="line">    </div>
<div class="line">    Feed --&gt;|Feed| Unit0</div>
<div class="line">    </div>
<div class="line">    Unit0 --&gt;|Concentrate| Unit1</div>
<div class="line">    Unit0 --&gt;|Waste| Tailings</div>
<div class="line">    </div>
<div class="line">    Unit1 --&gt;|Concentrate| Unit0</div>
<div class="line">    Unit1 --&gt;|Waste| Palusznium</div>
<div class="line">    </div>
<div class="line">    classDef unit fill:#f9f,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef product fill:#bbf,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef feed fill:#bfb,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef tailings fill:#fbb,stroke:#333,stroke-width:2px;</div>
<div class="line">    </div>
<div class="line">    class Unit0,Unit1 unit;</div>
<div class="line">    class Palusznium product;</div>
<div class="line">    class Feed feed;</div>
<div class="line">    class Tailings tailings;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md19"></a>
A.3 Invalid Circuit (Self-Recycle)</h2>
<p>Vector: <code>[0, 0, -3, -1, -2]</code></p>
<div class="fragment"><div class="line">graph TD;</div>
<div class="line">    Feed([Circuit Feed])</div>
<div class="line">    Unit0[Unit 0]</div>
<div class="line">    Unit1[Unit 1]</div>
<div class="line">    Palusznium[Palusznium Product]</div>
<div class="line">    Gormanium[Gormanium Product]</div>
<div class="line">    Tailings[Tailings Output]</div>
<div class="line">    </div>
<div class="line">    Feed --&gt;|Feed| Unit0</div>
<div class="line">    </div>
<div class="line">    Unit0 --&gt;|Concentrate| Unit0</div>
<div class="line">    Unit0 --&gt;|Waste| Tailings</div>
<div class="line">    </div>
<div class="line">    Unit1 --&gt;|Concentrate| Palusznium</div>
<div class="line">    Unit1 --&gt;|Waste| Gormanium</div>
<div class="line">    </div>
<div class="line">    classDef unit fill:#f9f,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef product fill:#bbf,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef feed fill:#bfb,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef tailings fill:#fbb,stroke:#333,stroke-width:2px;</div>
<div class="line">    classDef invalid fill:#f99,stroke:red,stroke-width:3px;</div>
<div class="line">    </div>
<div class="line">    class Unit0 invalid;</div>
<div class="line">    class Unit1 unit;</div>
<div class="line">    class Palusznium,Gormanium product;</div>
<div class="line">    class Feed feed;</div>
<div class="line">    class Tailings tailings;</div>
</div><!-- fragment --><p>Note: This circuit is invalid because Unit 0 has a self-recycle connection (concentrate stream feeds back to itself). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
